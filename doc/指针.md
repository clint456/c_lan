## 指针是什么：

> - 地址：
>   - 位置信息
>   - 类型信息 

区别：存储单元的内容

`对变量的访问都是通过地址进行`

## 指针变量是什么：

> - 存放地址的变量
## 指针变量作为函数参数
`注意：`
- c语言中实参变量和形参变量之间的数据传递是单向传递的“值传递”
- 而指针作为函数参数时，同样要遵循“单向值传递的规则`!
## 指针指向数组:

### 指针运算
`如： int a[10];
int  *p = a;`
> 指针法 ==> 下标法
> - p ==> &a[0]
> - p+1 ==> &a[1] 
> - *p ===> a[0] 
> - *(p+1) ===> a[1]
> - p2-p1 ===> 2 
```c
int *p1 = a[3];
int *p2 = a[5]
printf("%d\n",p2-p1);
// ==> p2 - p1 ==> 2
//表示元素之间差2个元素
```

`注意：两个地址不能相加，如p1+p2没有意义`

### 引用数组元素的三种方法
- 1.下标法
`a[i]`
- 2.通过数组名计算数组元素的地址，找出元素的值
- `{1.2.效率相同，都是转化为*(a+i)}`
- 3.使用指针变量指向数组元素`(效率最高，不必每次都重新计算地址)`

`注意：`
- 不能将数组名a++，因为本质上：数组名是一个常量地址，不可以改变；
- 而指针变量可以进行运算，因为它是一个变量`

### 数组的高级用法：
- p[i]是什么
```c
p[1] == *(p+1) = a[0+1] == a[1]
```
- **指针引用数组元素方法总结**

```c
#include <stdio.h>

int main(int argc, char const *argv[])
{
    /* code */
    int a[100] = {1,2,3,4,5,6,7,8,9,10};
    int *p = &a[0]; //初始化
    //int *p = a

    //1.p++
    p++;
    printf("p++: %d\n",*p);
    // == 》 2

    p = a;
    //2. *p++  == *(p++)  
    //*和++优先级级相同，自右向左运算
    printf("*p++: %d\n",*p++);
    printf("*p: %d\n",*p);
    p = a;
    printf("*++p:%d\n",*(++p));
    //注意：++p 和 p++ 的区别

    p=a;
    //3.*(p++) and *(p++) 
    //这里注意自增自减符的特性即可

    //4.++(*p)
    p++; 
    printf("*p: %d\n",*p);
    printf("++(*p):%d\n",++(*p));
    //这里注意是将数组中的值自增，而不是p移动到下一个数组元素

    //5. *(++p) == a[i++]     *(p--) == a[i--]     *(--p) == a[--i]
    //p先自增或自减运算，在进行取值*运算

    p = a;
    //输出数组的100个元素
    //方法一
    printf("输出数组的100个元素【方法一】:\n");
    while (p<a+100)
    {
        printf("%d",*p++);
    }
    printf("\n");


    p=a;
    //方法二
    printf("输出数组的100个元素【方法二】：\n");
    while(p<a+100)
    {
        printf("%d",*p);
        p++;
    }
    printf("\n");

    return 0;
}

```

### 使用数组名作为函数参数

### 通过指针引用多维数组
#### 1.多维数组元素的地址
```c
int main(int argc, char const *argv[])
{
    int a[3][4] = {1,3,5,7,9,11,13,15,17,19,21,23};
    printf("a: %d,*a: %d\n",a,*a); 
    //a: 0行起始地址 *a: 0行0列元素地址  
    printf("a[0]: %d,*(a+0): %d\n",a[0],*(a+0));
    //a[0]: *(a+0): 0行0列元素地址
    printf("&a[0]: %d,&a[0][0]:%d\n",&a[0],&a[0][0]);
    //&a[0]: 0行起始地址 &a[0][0]： 0行0列元素地址

    printf("a[1]: %d, a+1: %d\n",a[1],a+1);
    //a[1]: 1行0列元素地址  a+1: 1行起始地址
    printf("&a[1][0]： %d,*(a+1)+0： %d\n",&a[1][0],*(a+1)+0);
    //第1行0列元素地址
    printf("a[2]: %d,*(a+2):%d\n",a[2],*(a+2));
    //第2行0元素地址

    printf("a[1][0]: %d,*(*(a+1)+0): %d",a[1][0],*(*(a+1)+0));
    //1行0列元素的值


    return 0;
}
```
```
a: 1870657792,*a: 1870657792
a[0]: 1870657792,*(a+0): 1870657792
&a[0]: 1870657792,&a[0][0]:1870657792
a[1]: 1870657808, a+1: 1870657808
&a[1][0]： 1870657808,*(a+1)+0： 1870657808
a[2]: 1870657824,*(a+2):1870657824
a[1][0]: 9,*(*(a+1)+0): 9
```
#### tips：**在二维数组a[3][4]中**
- `a[0] 类型为int*型（指向整型变量`
- `a 类型为int (*p)[4] (指向含有4个元素的一维数组)`

#### 2.指向多为数组元素的指针变量
- `利用二维数组的顺序存储方式   a[i][j] ===> a + (i*m +j)  ===》基类型: int*`
- `利用指向包含m个元素的一维数组 int (*p)[m]  ===>基类型：一维数组 `

#### 3.指向数组的指针作为函数参数
- 1.用指向变量的指针变量
- 2.用指向一维数组的指针变量

```c
void average(float *p,int n)
//指针变量
{

}

void search(float (*p)[4],int n)
//p是指向具有4个元素的一维数组的指针
{

}
int main()
{    
float score[3][4] = {};
average(*score,12); 
// -- *score int* 型

search(score);
//--- int(*p)[4]型
}

```

## 通过指针引用字符串
### 字符串的引用方式：
> - 数组名+下标
> - 用字符指针变量指向一个字符串常量
```c
#include <stdio.h>
int main()
{    
    char* string = "absfag adg";
    return 0;}
```

### 字符指针作函数参数

### 使用字符指针变量和字符数组的比较
`tips:字符串是常量,`
- 在C语言中没有专门的字符串变量，如果想将一个字符串存放在变量中以便保存，必须使用字符数组，即用一个字符型数组来存放一个字符串，数组中每一个元素存放一个字符。例如“char a[10]="love".”

- 1.
    -  字符数组由若干个元素组成每个元素放一个字符；
    -  字符指针变量存放的是地址
- 2.赋值方式不同：
    - 可以对字符指针变量赋值
    - 不可以对数组名赋值
- 3.初始化的不同：
> 字符数组：
>  - 字符数组仅仅可以在定义！时可以整体赋值
>  - 之后不能使用赋值语句对全部元素进行赋值

> 字符指针变量：
> - 可以先定义字符指针，然后再给字符指针整体赋值

- 4.存储单元的内容:
    - 字符数组：预先定义大小
    - 字符指针：分配一个指针变量的大小
        - 16位机器的代码时，指针占2个字节

        - 32位机器的代码时，指针占4个字节

        - 64位机器的代码时，指针占8个字节
- 5.
    - 指针变量的值可以改变
    - 字符数组名代表一个固定的值，不能改变
- 6.
    - 字符数组的值是可以改变的（可以再进行赋值）
    - 字符指针变量指向的字符串常量中的内容是不可以被取代在（不能再进行赋值）
```c
#include <stdio.h>

int main(int argc, char const *argv[])
{ 
    char a[] = "abcdefg"; //字符数组
    char b[14] = "abcdefg";//字符数组
    char *c = "house"; //字符串常量



    //经典错误：
    //a = "adags";
    //b[] = "aggadsga"; 
    

    //注意字符数组仅仅可以在定义！时可以整体赋值
    //之后不能使用赋值语句对全部元素进行赋值

    printf("%s\n%s\n",a,b);

    //经典错误：
    //*(c+1) = 'r';
    //c[1] = 'r';
    //字符指针变量指向的字符串常量中的内容是不可以被取代的
    //即不能被赋值

    printf("%s\n",c);

    
    char *d  = a;//本质上也是字符数组，是变量
    *(d+1) = '0';  //合法
    printf("%s\n",d);

    return 0;
}



```
```output
abcdefg
abcdefg
house
a0cdefg
```
- 7.引用数组：
    - 字符数组：
        - 下标法（数组名 or 下标）
        - 地址法
    - 指针变量指向数组：
        - `char *a  = "china"; `
        - 可以用a[5]获取相应的值

- 8.
    - 用指针变量指向一个格式字符串，可以用其代替printf中的格式字符串
```c
    //用指针变量指向一个格式字符串，可以用其代替printf中的格式字符串
    int m = 1;
    float n=2.5;

    char *format_1; //字符指针
    format_1 = "m=%d,n=%f\n";

    char format_2[] = "m=%d,n=%f\n";//字符数组

    //经典错误，数组要定义大小
    //char format_3[];
    //format_3 =  "m=%d,n=%f\n"; 

    printf(format_1,m,n);
    printf(format_2,m,n);
```
```output
m=1,n=2.500000
m=1,n=2.500000
```

        



## 指向函数的指针
### 什么是函数指针：
- 函数名代表函数的起始地址
```c
int (*p)(int,int)
//p是指向函数的指针变量
//可以指向  [函数返回值类型为int] 
//并且函数有  [两个整型参数的函数]

```

```c

int add(int x,int y)
{
    printf("%d,%d\n",x,y);
    return (x+y);
}

    /* code */
    //定义方式1
    int (*f)(int,int);
    //定义方式2
    int (*f)();
//错误定义：
//float (*f)(int);

    f = add;


    //调用方式1
    add(2,3);
    //调用方式2
    f(4,5);
    //调用方式3
    (*f)(7,9)
```
- `赋值:`
    - 指向函数的指针只能指向`在定义时`指向的类型的函数
    - 只需要给出函数名，`不能给出函数参数`
```c
p = max(a,b); //wrong
p = max;//right
```
- `调用:`
    - c = (*p)(a,b);
    - c = p(a,b);
    - 注意返回值c的类型
- 对函数的指针变量不能进行算术运算，没有意义
- 通过指针变量可以先后调用不同的函数
```c
if(n==1) p = max;
else if(n==2)  p = min;
```
### 用指向函数的指针作为函数参数：
- 把函数的入口地址作为参数传递到其他函数
```c
int fun(int x,int y,int(*p)(int,int)); 
int max(int,int);
int min(int,int);
int add(int,int);

int a=34,b=-21,n;
scanf("%d",&n);
if(n==1) fun(a,b,max);
else if(n==2) fun(a,b,min);
else if(n==3) fun(a,b,add);

int fun(int x, int y,int (*p)(int,int))
{
    int result;
    result = (*p)(x,y);
    printf("%d\n",result);
}
```


## 返回指针值的函数
- 返回值的类型是指针类型
    - 类型名 * 函数名(参数列表)

## 指针数组和多重指针
### 什么是指针数组：
- 一个数组--里面的元素为指针类型数据
- 

## 动态内存分配与指向它的指针

